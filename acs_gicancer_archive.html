<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Acute Care of GI Cancer Patients - Archive – talks</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">talks</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <span class="nav-link">
<span class="menu-text">about.qmd</span>
    </span>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#esophageal-cancer---background" id="toc-esophageal-cancer---background" class="nav-link active" data-scroll-target="#esophageal-cancer---background">Esophageal Cancer - Background</a>
  <ul class="collapse">
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  </ul></li>
  <li><a href="#esophageal-cancer-with-bleeding" id="toc-esophageal-cancer-with-bleeding" class="nav-link" data-scroll-target="#esophageal-cancer-with-bleeding">Esophageal Cancer with bleeding</a></li>
  <li><a href="#perforated-esophageal-cancer" id="toc-perforated-esophageal-cancer" class="nav-link" data-scroll-target="#perforated-esophageal-cancer">Perforated Esophageal Cancer</a>
  <ul class="collapse">
  <li><a href="#cervical-esophageal-perforation" id="toc-cervical-esophageal-perforation" class="nav-link" data-scroll-target="#cervical-esophageal-perforation">Cervical esophageal perforation</a></li>
  <li><a href="#thoracic-esophageal-perforations" id="toc-thoracic-esophageal-perforations" class="nav-link" data-scroll-target="#thoracic-esophageal-perforations">Thoracic esophageal perforations</a></li>
  <li><a href="#diagnosis" id="toc-diagnosis" class="nav-link" data-scroll-target="#diagnosis">Diagnosis</a></li>
  <li><a href="#conservative-management" id="toc-conservative-management" class="nav-link" data-scroll-target="#conservative-management">Conservative management</a></li>
  <li><a href="#emergent-surgery" id="toc-emergent-surgery" class="nav-link" data-scroll-target="#emergent-surgery">Emergent surgery</a></li>
  </ul></li>
  <li><a href="#tracheoesophageal-fistula" id="toc-tracheoesophageal-fistula" class="nav-link" data-scroll-target="#tracheoesophageal-fistula">Tracheoesophageal fistula</a></li>
  <li><a href="#gastric-cancer-with-bleeding" id="toc-gastric-cancer-with-bleeding" class="nav-link" data-scroll-target="#gastric-cancer-with-bleeding">Gastric cancer with bleeding</a></li>
  <li><a href="#gastric-cancer-with-perforation" id="toc-gastric-cancer-with-perforation" class="nav-link" data-scroll-target="#gastric-cancer-with-perforation">Gastric cancer with perforation</a></li>
  <li><a href="#gastric-outlet-obstruction" id="toc-gastric-outlet-obstruction" class="nav-link" data-scroll-target="#gastric-outlet-obstruction">Gastric outlet obstruction</a></li>
  <li><a href="#appendectomy-in-the-cancer-patient" id="toc-appendectomy-in-the-cancer-patient" class="nav-link" data-scroll-target="#appendectomy-in-the-cancer-patient">Appendectomy in the cancer patient</a></li>
  <li><a href="#cholecystitis-in-the-cancer-patient" id="toc-cholecystitis-in-the-cancer-patient" class="nav-link" data-scroll-target="#cholecystitis-in-the-cancer-patient">Cholecystitis in the cancer patient</a></li>
  <li><a href="#lymph-node-biossy" id="toc-lymph-node-biossy" class="nav-link" data-scroll-target="#lymph-node-biossy">Lymph node biossy</a></li>
  <li><a href="#vascular-access-in-the-cancer-patient." id="toc-vascular-access-in-the-cancer-patient." class="nav-link" data-scroll-target="#vascular-access-in-the-cancer-patient.">Vascular access in the cancer patient.</a>
  <ul class="collapse">
  <li><a href="#catheter-related-bloodstream-infections" id="toc-catheter-related-bloodstream-infections" class="nav-link" data-scroll-target="#catheter-related-bloodstream-infections">Catheter-related bloodstream infections</a></li>
  </ul></li>
  <li><a href="#bile-duct-obstruction-from-pancreatic-cancer" id="toc-bile-duct-obstruction-from-pancreatic-cancer" class="nav-link" data-scroll-target="#bile-duct-obstruction-from-pancreatic-cancer">Bile duct obstruction from pancreatic cancer</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Acute Care of GI Cancer Patients - Archive</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="esophageal-cancer---background" class="level1">
<h1>Esophageal Cancer - Background</h1>
<p>Emergency presentation of esophageal cancer is associated with poor prognosis due to increased incidence of metastatic diseaase <span class="citation" data-cites="markar711">(<a href="#ref-markar711" role="doc-biblioref">Markar et al., 2018</a>)</span></p>
<section id="section" class="level3">
<h3 class="anchored" data-anchor-id="section"></h3>
<p>E.Z. Keung, X. Liu, A. Nuzhad, et al.&nbsp;In-hospital and long-term outcomes after percutaneous endoscopic gastrostomy in patients with malignancy J Am Coll Surg, 215 (2012), p.&nbsp;777</p>
</section>
</section>
<section id="esophageal-cancer-with-bleeding" class="level1">
<h1>Esophageal Cancer with bleeding</h1>
</section>
<section id="perforated-esophageal-cancer" class="level1">
<h1>Perforated Esophageal Cancer</h1>
<p>Perforated esophageal cancer most commonly occurs after endoscopy, endoscopic ultrasound, or dilation of an esophageal cancer (or benign stricture). Endoscopic stenting is generally not feasible due to the underlying stricture. Treatment options are conservative management with drainage and IV antibiotics or emergency surgery. <span class="citation" data-cites="abu-daff34">(<a href="#ref-abu-daff34" role="doc-biblioref">Abu-Daff et al., 2016</a>)</span></p>
<section id="cervical-esophageal-perforation" class="level3">
<h3 class="anchored" data-anchor-id="cervical-esophageal-perforation">Cervical esophageal perforation</h3>
<p>Contained perforations of the cervical esophagus can be treated with NPO and IV antibiotics. Uncontained perforations need surgical exploration. In this case, nutritional support with gastrostomy is indicated.</p>
</section>
<section id="thoracic-esophageal-perforations" class="level3">
<h3 class="anchored" data-anchor-id="thoracic-esophageal-perforations">Thoracic esophageal perforations</h3>
<p>Pittsburgh esophageal perforation scoring system: <span class="citation" data-cites="abbas749">(<a href="#ref-abbas749" role="doc-biblioref"><strong>abbas749?</strong></a>)</span> Validation of Pittsburgh scoring system <span class="citation" data-cites="schweigert1002">(<a href="#ref-schweigert1002" role="doc-biblioref"><strong>schweigert1002?</strong></a>)</span></p>
<p>A series from Birmingham UK of 74 esophageal perforations over 15 years include 13 patients with perforated cancers, of whom 7 were treated with endoscoic stenting <span class="citation" data-cites="charalampakis1710">(<a href="#ref-charalampakis1710" role="doc-biblioref">Charalampakis et al., 2023</a>)</span>. These 13 patients had a 1-year mortality of 77%</p>
<p>These patients need immediate consultation with thoracic surgery and GI surgical oncology to formulate a treatment plan.</p>
</section>
<section id="diagnosis" class="level2">
<h2 class="anchored" data-anchor-id="diagnosis">Diagnosis</h2>
<p>CT esophagram with water soluble contrast is the diagnostic study of choice<span class="citation" data-cites="suarez-poveda505">(<a href="#ref-suarez-poveda505" role="doc-biblioref">Suarez-Poveda et al., 2014</a>)</span></p>
<p>A study from Colorado <span class="citation" data-cites="madsen2984">(<a href="#ref-madsen2984" role="doc-biblioref">Madsen et al., 2023</a>)</span> of 65 patients transferred with suspected esophageal perforation found that 24 patients were ultimately found not to have a perforation. Among patients for whom pneumomediastinum was their sole criteria for transfer, only 57% were ultimately found to have a perforation. Among patients with a pleural effusion prior to transfer, 83% were ultimately found to have a perforation. Patients with a lactate greater than 1.6 were 11 times more likely to have aperforation.</p>
</section>
<section id="conservative-management" class="level2">
<h2 class="anchored" data-anchor-id="conservative-management">Conservative management</h2>
</section>
<section id="emergent-surgery" class="level2">
<h2 class="anchored" data-anchor-id="emergent-surgery">Emergent surgery</h2>
<p>Emergency esophagectomy is the traditional approach to perforated esophageal cancer given the difficulty in stenting an area of tumor (or stricture). Short-term goals are fluid resuscitation, IV antibiotics, and drainage of the pleurae (and abdomen).</p>
<p>Emergent esophagogastrectomy via an abdominal and thoracic approach is the conventional approach in a fit patient. For frail patients, an transabdominal approach with esophagogastrostomy is less morbid <span class="citation" data-cites="gillen3065">(<a href="#ref-gillen3065" role="doc-biblioref">Gillen et al., 2009</a>)</span> although placing the patient at higher risk of postoperative reflux.</p>
</section>
</section>
<section id="tracheoesophageal-fistula" class="level1">
<h1>Tracheoesophageal fistula</h1>
<p>Tracheoesophageal fistula in the context of esophageal cancer is most commonly due to squamous cell carcinoma. These patients need immediate consultation with thoracic surgery and interventional pulmonology.</p>
</section>
<section id="gastric-cancer-with-bleeding" class="level1">
<h1>Gastric cancer with bleeding</h1>
</section>
<section id="gastric-cancer-with-perforation" class="level1">
<h1>Gastric cancer with perforation</h1>
</section>
<section id="gastric-outlet-obstruction" class="level1">
<h1>Gastric outlet obstruction</h1>
<p>Jeurnink SM, Steyerberg EW, van Hooft JE, et al.&nbsp;Surgical gastrojejunostomy or endoscopic stent placement for the palliation of malignant gastric outlet obstruction (SUSTENT study): A multicenter randomized trial. Gastrointest Endosc. 2010;71(3):490-499.</p>
<p>J.H. No, S.W. Kim, C.H. Lim, et al.&nbsp;Long-term outcome of palliative therapy for gastric outlet obstruction caused by unresectable gastric cancer in patients with good performance status: endoscopic stenting versus surgery Gastrointest Endosc, 78 (2013), p.&nbsp;55</p>
<p>C.G. Kim, I.J. Choi, J.Y. Lee, et al.&nbsp;Outcomes of second self-expandable metallic stent insertion for malignant gastric outlet obstruction Surg Endosc, 28 (2014), p.&nbsp;281</p>
<p>A. Tringali, P. Didden, A. Repici, et al.&nbsp;Endoscopic treatment of malignant gastric and duodenal strictures: a prospective, multicenter study Gastrointest Endosc, 79 (2014), p.&nbsp;66</p>
</section>
<section id="appendectomy-in-the-cancer-patient" class="level1">
<h1>Appendectomy in the cancer patient</h1>
<p>Non-operative paths</p>
</section>
<section id="cholecystitis-in-the-cancer-patient" class="level1">
<h1>Cholecystitis in the cancer patient</h1>
<p>Wait for counts to come back? Percutaneous drainage? Med Once think it’s always an emergency…</p>
</section>
<section id="lymph-node-biossy" class="level1">
<h1>Lymph node biossy</h1>
<p>Who needs a core vs open biopsy?</p>
</section>
<section id="vascular-access-in-the-cancer-patient." class="level1">
<h1>Vascular access in the cancer patient.</h1>
<section id="catheter-related-bloodstream-infections" class="level2">
<h2 class="anchored" data-anchor-id="catheter-related-bloodstream-infections">Catheter-related bloodstream infections</h2>
<p>See <a href="https://academic.oup.com/cid/article/49/1/1/369414">Infectious Disease Society of America</a></p>
</section>
</section>
<section id="bile-duct-obstruction-from-pancreatic-cancer" class="level1">
<h1>Bile duct obstruction from pancreatic cancer</h1>
<p>Neutropenic patient with perirectal abscess - Percutaneous vs</p>
<p>LCI will do followup</p>
<p>First steps</p>
<p>Node - why can’t we do a core biopsy?</p>
<p>Keep cases at Mercy and Pineville (don’t all need to go to Main)</p>
<p>Red doesn’t have time at Main in OR7</p>
<p>Ortho has been doing round trips to Mercy</p>
<p>An acute care surgeon’s dilemma: Operative vs.&nbsp;non-operative management of emergency general surgery conditions in patients with recent colorectal cancer treatment. ginzberg p 15</p>
<p>Emergency surgery for patients with cancer receiving systemic anticancer therapy Kathryn Coulson, Nigel Day, Madeleine C Strach, Paul A Sutton British Journal of Surgery, Volume 110, Issue 6, June 2023, Pages 631–634,</p>
<p>Postoperative Mortality for Acute Care Surgery Operations for Patients with Cancer Suggests Differences in Complication Rescue Ward, Carson R; Carpenter, Elizabeth Lee MD; Pospiech, Emily MD, FACS; Chauviere, Matthew Victor MD; Krell, Robert W MD, FACS Author Information Journal of the American College of Surgeons 236(5):p S43, May 2023 - NSQIP</p>
<p>Emergency surgical consultation Open Access for cancer patients: identifying the prognostic determinants of health Kadhim Taqi1* , Diane Kim2, Lily Yip2, Charlotte Laane3, Zeeshan Rana3, Morad Hameed3, Trevor Hamilton3 and Heather Stuart3</p>
<p>Ribeiro IB, de Moura DTH, Thompson CR, Moura EGH. Acute abdominal obstruction: Colon stent or emergency surgery? An evidence-based review. World J Gastrointest Endosc. 2019;11(3):193-208.</p>
<p>Schuster KM, McGillicuddy EA, Maung AA, Kaplan LJ, Davis KA. Can acute care surgeons perform emergency colon procedures with good outcomes? J Trauma. 2011;71(1):94-101.</p>
<p>Anantha RV, Brackstone M, Parry N, Leslie K. An acute care surgery service expedites the treatment of emergency colon cancer: A retrospective case-control study. World J Emerg Surg. 2014;9(1):19.</p>
<p><a href="https://www-clinicalkey-com.wake.idm.oclc.org/#!/content/journal/1-s2.0-S0039610923002086">Surgical Clinical of NA: Colorectal Oncologic Emergencies</a></p>
<p>See Norton - Surgical Emergencies inthe scnaer pateint JJ sussman</p>
<p>Radiologic gastrostomy Y. Inaba, H. Yamaura, Y. Sato, et al.&nbsp;Percutaneous radiologic gastrostomy in patients with malignant pharyngoesophageal obstruction Jpn J Clin Oncol, 43 (2013), p.&nbsp;713</p>
<p>Colorectal Cancer presenting as surgical emergencies Cuffy Surgical Oncology 2004 p 149</p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-abu-daff34" class="csl-entry" role="listitem">
Abu-Daff, S., Shamji, F., Ivanovic, J., Villeneuve, P.J., Gilbert, S., Maziak, D.E., Sundaresan, R.S., Seely, A.J.E., 2016. Esophagectomy in esophageal perforations: An analysis. Diseases of the Esophagus: Official Journal of the International Society for Diseases of the Esophagus 29, 34–40. https://vb3lk7eb4t.search.serialssolutions.com/?id=<a href="https://www.ncbi.nlm.nih.gov/pubmed/25327568">25327568</a>
</div>
<div id="ref-charalampakis1710" class="csl-entry" role="listitem">
Charalampakis, V., Cardoso, V.R., Sharples, A., Khalid, M., Dickerson, L., Wiggins, T., Gkoutos, G.V., Tucker, O., Super, P., Richardson, M., Nijjar, R., Singhal, R., 2023. Single-centre review of the management of intra-thoracic oesophageal perforation in a tertiary oesophageal unit: Paradigm shift, short- and long-term outcomes over 15&nbsp;years. Surgical Endoscopy 37, 1710–1717. https://vb3lk7eb4t.search.serialssolutions.com/?id=<a href="https://www.ncbi.nlm.nih.gov/pubmed/36207647">36207647</a>
</div>
<div id="ref-gillen3065" class="csl-entry" role="listitem">
Gillen, S., Friess, H., Kleeff, J., 2009. Palliative cardia resection with gastroesophageal reconstruction for perforated carcinoma of the gastroesophageal junction. World Journal of Gastroenterology : WJG 15, 3065–3067. https://vb3lk7eb4t.search.serialssolutions.com/?id=<a href="https://www.ncbi.nlm.nih.gov/pubmed/19554663">19554663</a>
</div>
<div id="ref-madsen2984" class="csl-entry" role="listitem">
Madsen, H.J., Stuart, C.M., Wojcik, B.M., Dyas, A.R., Hunt, A., Helmkamp, L.J., Gergen, A.K., Weyant, M.J., Randhawa, S.K., Mitchell, J.D., Meguid, R.A., 2023. Esophagram should be performed to diagnose esophageal perforation before inter-hospital transfer. Journal of Thoracic Disease 15, 2984–2996. https://vb3lk7eb4t.search.serialssolutions.com/?id=<a href="https://www.ncbi.nlm.nih.gov/pubmed/37426131">37426131</a>
</div>
<div id="ref-markar711" class="csl-entry" role="listitem">
Markar, S.R., Mackenzie, H., Jemal, S., Faiz, O., Cunningham, D., Hanna, G.B., 2018. Emergency <span>Presentation</span> of <span>Esophagogastric</span> <span>Cancer</span>: <span>Predictors</span> and <span>Long</span>-term <span>Prognosis</span>. Annals of Surgery 267, 711–715. https://vb3lk7eb4t.search.serialssolutions.com/?id=<a href="https://www.ncbi.nlm.nih.gov/pubmed/28323674">28323674</a>
</div>
<div id="ref-suarez-poveda505" class="csl-entry" role="listitem">
Suarez-Poveda, T., Morales-Uribe, C.H., Sanabria, A., Llano-Sánchez, A., Valencia-Delgado, A.M., Rivera-Velázquez, L.F., Bedoya-Ospina, J.F., 2014. Diagnostic performance of <span>CT</span> esophagography in patients with suspected esophageal rupture. Emergency Radiology 21, 505–510. https://vb3lk7eb4t.search.serialssolutions.com/?id=<a href="https://www.ncbi.nlm.nih.gov/pubmed/24748526">24748526</a>
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/gisurgonc\.github\.io\/talks\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>